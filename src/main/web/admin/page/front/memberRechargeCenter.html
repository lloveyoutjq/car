<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="../../static/layui/css/layui.css" media="all"/>
</head>
<body>
<div class="layui-fluid">
    <div class="layui-row" style="margin-top: 30px;">
        <div class="layui-col-md-offset1 layui-col-md3">
            <h1>会员充值中心</h1>
        </div>
        <div class="layui-col-md-offset4 layui-col-md-offset4">
            <div class="layui-col-md-offset3 layui-col-md3">
                <input type="text" placeholder="会员号" class="layui-input">
            </div>
            <div class=" layui-col-md2">
                &nbsp;
                <button type="button" class="layui-btn layui-btn-danger">搜索</button>
            </div>
        </div>
    </div>
    <table class="layui-hide" id="demo" lay-filter="test"></table>
</div>

<script type="text/html" id="barDemo1">
    <a class="layui-btn layui-btn-xs" lay-event="insert">添加会员</a>
    <a class="layui-btn layui-btn-xs" lay-event="edit">修改会员资料</a>
</script>

<script type="text/javascript" src="../../static/js/jquery-3.4.1.min%20.js"></script>
<script type="text/javascript" src="../../static/js/vue.js"></script>
<script type="text/javascript" src="../../static/js/xadmin.js"></script>
<script type="text/javascript" src="../../static/layui/layui.js"></script>
<script>
    var data1 = [
        {
            memberid: 'e2333',
            documentType: 1,
            settlementMethod: 1,
            documentStatus: 1,
            settlementStatus: 1
        }
    ];

    layui.use(['layer', 'table', 'element'], function () {
        var table = layui.table //表格
            , element = layui.element; //元素操作

        //执行一个 table 实例
        table.render({
            elem: '#demo'
            , height: 420
            /*,url: '/demo/table/user/' //数据接口*/
            , data: data1
            , title: '用户表'
            , page: true //开启分页
            , toolbar: '#barDemo1' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
            , cols: [[ //表头
                {type: 'checkbox', fixed: 'left'}
                , {field: 'memberid', title: '会员号', width: 160, sort: true, fixed: 'left'}
                , {field: 'documentType', title: '会员类型', width: 120, sort: true}
                , {field: 'settlementMethod', title: '客户名称', width: 120, sort: true}
                , {field: 'documentStatus', title: '有效期(年)', width: 120, sort: true}
                , {field: 'settlementStatus', title: '入会时间', width: 130, sort: true}
                , {field: 'settlementTime', title: '会费(元)', width: 120, sort: true}
                , {field: 'remark', title: '备注', width: 135, sort: true}
            ]]
        });

        //监听头工具栏事件
        table.on('toolbar(test)', function (obj) {
            var checkStatus = table.checkStatus(obj.config.id)
                , data = checkStatus.data; //获取选中的数据
            switch (obj.event) {
                case 'insert':
                    xadmin.open("会员新增充值", 2, "page/MemberRechargeCenter/MemberInsert.html", ($(window).width() * 0.9), ($(window).height() - 50), false, false, function (layero, index, html) {
                        $(html).find("[name=id]").val(data[0].saleid);
                    });
                    break;
                case 'edit':
                    if (data.length === 0) {
                        layer.msg('请选择一行');
                    } else if (data.length > 1) {
                        layer.msg('只能同时修改一个');
                    } else {
                        xadmin.open("会员信息修改", 2, "page/MemberRechargeCenter/MemberUpdate.html", ($(window).width() * 0.9), ($(window).height() - 50), false, false, function (layero, index, html) {
                            $(html).find("[name=id]").val(data[0].saleid);
                        });
                    }
                    break;
            }
        });
    });
</script>
</body>
</html>
